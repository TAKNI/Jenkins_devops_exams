# ============================
# GLOBAL
# ============================

imagePullSecrets:
  - name: regcred

ingress:
  enabled: true
  host: fastapi.example.com   # Ã€ adapter dans values-dev/qa/staging/prod

# ============================
# MOVIE SERVICE
# ============================

movieService:
  image:
    repository: rachidtakni/movie-service
    tag: "latest"
    pullPolicy: IfNotPresent

  env:
    DATABASE_URI: "postgresql://{{ .Values.movieDb.username }}:{{ .Values.movieDb.password }}@movie-db:5432/{{ .Values.movieDb.database }}"
    CAST_SERVICE_HOST_URL: "http://cast-service:8000"

# ============================
# CAST SERVICE
# ============================

castService:
  image:
    repository: rachidtakni/cast-service
    tag: "latest"
    pullPolicy: IfNotPresent

  env:
    DATABASE_URI: "postgresql://{{ .Values.castDb.username }}:{{ .Values.castDb.password }}@cast-db:5432/{{ .Values.castDb.database }}"

# ============================
# MOVIE DATABASE
# ============================

movieDb:
  image: postgres:15
  username: movie_user
  password: movie_pass
  database: moviedb
  storage: 1Gi

# ============================
# CAST DATABASE
# ============================

castDb:
  image: postgres:15
  username: cast_user
  password: cast_pass
  database: castdb
  storage: 1Gi
